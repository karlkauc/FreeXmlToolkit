<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.*?>
<VBox prefHeight="768.0" prefWidth="1024.0" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0"
      AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0" xmlns="http://javafx.com/javafx/11.0.14-internal"
      xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.fxt.freexmltoolkit.controller.SchematronController"
      stylesheets="@../css/xsd-tab-groups.css">

    <!-- Schematron Operations Toolbar -->
    <ToolBar styleClass="xsd-toolbar">
        <!-- File Operations Group -->
        <Button fx:id="newSchematronFileButton" text="New" contentDisplay="TOP" styleClass="toolbar-button" onAction="#newSchematronFile">
            <graphic>
                <FontIcon iconLiteral="bi-file-earmark-plus" iconSize="20" iconColor="#28a745" styleClass="toolbar-icon-success"/>
            </graphic>
            <tooltip>
                <Tooltip text="Create New Schematron File"/>
            </tooltip>
        </Button>

        <Button fx:id="loadSchematronFileButton" text="Open" contentDisplay="TOP" styleClass="toolbar-button" onAction="#loadSchematronFile">
            <graphic>
                <FontIcon iconLiteral="bi-folder2-open" iconSize="20" iconColor="#007bff" styleClass="toolbar-icon-primary"/>
            </graphic>
            <tooltip>
                <Tooltip text="Open Schematron File"/>
            </tooltip>
        </Button>

        <Button fx:id="saveSchematronButton" text="Save" contentDisplay="TOP" styleClass="toolbar-button" onAction="#saveSchematron">
            <graphic>
                <FontIcon iconLiteral="bi-save" iconSize="20" iconColor="#17a2b8" styleClass="toolbar-icon-info"/>
            </graphic>
            <tooltip>
                <Tooltip text="Save Schematron File (Ctrl+S)"/>
            </tooltip>
        </Button>

        <Button fx:id="saveAsSchematronButton" text="Save As" contentDisplay="TOP" styleClass="toolbar-button" onAction="#saveAsSchematron">
            <graphic>
                <FontIcon iconLiteral="bi-file-earmark-arrow-down" iconSize="20" iconColor="#17a2b8" styleClass="toolbar-icon-info"/>
            </graphic>
            <tooltip>
                <Tooltip text="Save As... (Ctrl+Shift+S)"/>
            </tooltip>
        </Button>

        <Separator orientation="VERTICAL"/>

        <!-- Editing Group -->
        <Button fx:id="newRuleButton" text="Add Rule" contentDisplay="TOP" styleClass="toolbar-button">
            <graphic>
                <FontIcon iconLiteral="bi-plus-circle" iconSize="20" iconColor="#28a745" styleClass="toolbar-icon-success"/>
            </graphic>
            <tooltip>
                <Tooltip text="Add New Rule (Ctrl+R)"/>
            </tooltip>
        </Button>

        <Separator orientation="VERTICAL"/>

        <!-- Favorites Group -->
        <Button fx:id="addToFavoritesBtn" text="Favorite" contentDisplay="TOP" styleClass="toolbar-button">
            <graphic>
                <FontIcon iconLiteral="bi-star" iconSize="20" iconColor="#ffc107" styleClass="toolbar-icon-warning"/>
            </graphic>
            <tooltip>
                <Tooltip text="Add to Favorites (Ctrl+D)"/>
            </tooltip>
        </Button>

        <Button fx:id="toggleFavoritesButton" text="Favorites" contentDisplay="TOP" styleClass="toolbar-button">
            <graphic>
                <FontIcon iconLiteral="bi-star-fill" iconSize="20" iconColor="#ffc107" styleClass="toolbar-icon-warning"/>
            </graphic>
            <tooltip>
                <Tooltip text="Show/Hide Favorites (Ctrl+Shift+D)"/>
            </tooltip>
        </Button>

        <Region HBox.hgrow="ALWAYS"/>

        <!-- Help -->
        <Button fx:id="helpBtn" text="Help" contentDisplay="TOP" styleClass="toolbar-button" onAction="#showHelp">
            <graphic>
                <FontIcon iconLiteral="bi-question-circle" iconSize="20" iconColor="#17a2b8" styleClass="toolbar-icon-info"/>
            </graphic>
            <tooltip>
                <Tooltip text="Help (F1)"/>
            </tooltip>
        </Button>
    </ToolBar>

    <!-- Main Content Area + Favorites -->
    <SplitPane fx:id="mainSplitPane" orientation="HORIZONTAL" dividerPositions="0.75" VBox.vgrow="ALWAYS">
        <!-- Main Tab Container -->
        <TabPane fx:id="tabPane">

        <!-- Code Editor Tab -->
        <Tab fx:id="codeTab" text="Code" closable="false" styleClass="primary-tab">
            <graphic>
                <FontIcon iconLiteral="bi-code-slash" iconSize="16"/>
            </graphic>
            <VBox spacing="0">
                <!-- Toolbar -->
                <ToolBar fx:id="toolbar">
                    <Button fx:id="innerLoadSchematronFileButton" text="Load Schematron" onAction="#loadSchematronFile">
                        <graphic>
                            <FontIcon iconLiteral="bi-folder2-open" iconColor="#007bff" iconSize="14"/>
                        </graphic>
                        <tooltip>
                            <Tooltip text="Load an existing Schematron file"/>
                        </tooltip>
                    </Button>

                    <Button fx:id="innerNewSchematronFileButton" text="New File" onAction="#newSchematronFile">
                        <graphic>
                            <FontIcon iconLiteral="bi-file-earmark-plus" iconColor="#28a745" iconSize="14"/>
                        </graphic>
                        <tooltip>
                            <Tooltip text="Create a new empty Schematron file"/>
                        </tooltip>
                    </Button>

                    <Button fx:id="innerSaveSchematronButton" text="Save" onAction="#saveSchematron">
                        <graphic>
                            <FontIcon iconLiteral="bi-save" iconColor="#6c757d" iconSize="14"/>
                        </graphic>
                        <tooltip>
                            <Tooltip text="Save current Schematron file"/>
                        </tooltip>
                    </Button>

                    <Button fx:id="innerSaveAsSchematronButton" text="Save As" onAction="#saveAsSchematron">
                        <graphic>
                            <FontIcon iconLiteral="bi-hdd-fill" iconColor="#17a2b8" iconSize="14"/>
                        </graphic>
                        <tooltip>
                            <Tooltip text="Save Schematron file with new name"/>
                        </tooltip>
                    </Button>

                    <Separator orientation="VERTICAL"/>

                    <Button fx:id="innerNewRuleButton" text="New Rule">
                        <graphic>
                            <FontIcon iconLiteral="bi-plus-circle" iconColor="#28a745" iconSize="14"/>
                        </graphic>
                        <tooltip>
                            <Tooltip text="Insert a new rule template"/>
                        </tooltip>
                    </Button>

                    <Button fx:id="innerNewPatternButton" text="New Pattern">
                        <graphic>
                            <FontIcon iconLiteral="bi-collection" iconColor="#007bff" iconSize="14"/>
                        </graphic>
                        <tooltip>
                            <Tooltip text="Insert a new pattern template"/>
                        </tooltip>
                    </Button>

                    <Separator orientation="VERTICAL"/>

                    <Button fx:id="innerFormatButton" text="Format" onAction="#formatSchematron">
                        <graphic>
                            <FontIcon iconLiteral="bi-code" iconColor="#6f42c1" iconSize="14"/>
                        </graphic>
                        <tooltip>
                            <Tooltip text="Format Schematron XML"/>
                        </tooltip>
                    </Button>

                    <Button fx:id="innerValidateButton" text="Validate">
                        <graphic>
                            <FontIcon iconLiteral="bi-check-circle" iconColor="#17a2b8" iconSize="14"/>
                        </graphic>
                        <tooltip>
                            <Tooltip text="Validate Schematron syntax"/>
                        </tooltip>
                    </Button>

                    <Button fx:id="innerTestRulesButton" text="Test Rules">
                        <graphic>
                            <FontIcon iconLiteral="bi-play-circle" iconColor="#ff6b6b" iconSize="14"/>
                        </graphic>
                        <tooltip>
                            <Tooltip text="Test rules against XML files"/>
                        </tooltip>
                    </Button>

                </ToolBar>

                <!-- Main Content Area with Split Pane -->
                <SplitPane dividerPositions="0.75" VBox.vgrow="ALWAYS">

                    <!-- Main Editor Area -->
                    <VBox fx:id="codeEditorContainer" spacing="0" SplitPane.resizableWithParent="true">
                        <org.fxt.freexmltoolkit.controls.XmlCodeEditor fx:id="xmlCodeEditor"
                                                                       VBox.vgrow="ALWAYS"/>
                    </VBox>

                    <!-- Sidebar -->
                    <VBox fx:id="sidebarContainer" spacing="5" minWidth="200" maxWidth="400" prefWidth="300">
                        <padding>
                            <Insets top="5" right="5" bottom="5" left="5"/>
                        </padding>

                        <!-- Quick Help -->
                        <TitledPane fx:id="helpPane" text="Quick Help" expanded="true" collapsible="true">
                            <VBox spacing="8" style="-fx-padding: 5;">
                                <Label text="Schematron Basics:"
                                       style="-fx-font-weight: bold; -fx-font-size: 12px;"/>
                                <VBox spacing="5">
                                    <Label text="• &lt;pattern&gt; - Groups related rules together"
                                           style="-fx-font-size: 11px;" wrapText="true"/>
                                    <Label text="• &lt;rule&gt; - Defines context and conditions"
                                           style="-fx-font-size: 11px;" wrapText="true"/>
                                    <Label text="• &lt;assert&gt; - Tests a condition (must be true)"
                                           style="-fx-font-size: 11px;" wrapText="true"/>
                                    <Label text="• &lt;report&gt; - Reports a finding (when condition is true)"
                                           style="-fx-font-size: 11px;" wrapText="true"/>
                                </VBox>

                                <Separator/>

                                <Label text="Common XPath Expressions:"
                                       style="-fx-font-weight: bold; -fx-font-size: 12px;"/>
                                <VBox spacing="5">
                                    <Label text="• . - Current node" style="-fx-font-size: 11px;"/>
                                    <Label text="• @attribute - Attribute of current node"
                                           style="-fx-font-size: 11px;"/>
                                    <Label text="• child::element - Child element" style="-fx-font-size: 11px;"/>
                                    <Label text="• count(element) - Count elements" style="-fx-font-size: 11px;"/>
                                    <Label text="• string-length(.) &gt; 0 - Text present"
                                           style="-fx-font-size: 11px;"/>
                                </VBox>
                            </VBox>
                        </TitledPane>

                        <!-- Schematron Structure -->
                        <TitledPane fx:id="structurePane" text="Document Structure" expanded="true" collapsible="true">
                            <VBox spacing="5">
                                <Label text="Structure of current schema:" style="-fx-font-size: 11px;"/>
                                <ListView prefHeight="100">
                                    <placeholder>
                                        <VBox alignment="CENTER" spacing="5">
                                            <FontIcon iconLiteral="bi-file-earmark-code" iconColor="#ced4da"
                                                      iconSize="24"/>
                                            <Label text="No schema loaded yet"
                                                   style="-fx-text-fill: #6c757d; -fx-font-size: 11px;"/>
                                        </VBox>
                                    </placeholder>
                                </ListView>
                            </VBox>
                        </TitledPane>

                        <!-- Rule Templates -->
                        <TitledPane fx:id="templatesPane" text="Rule Templates" expanded="false" collapsible="true">
                            <org.fxt.freexmltoolkit.controls.SchematronTemplateLibrary fx:id="templateLibrary"/>
                        </TitledPane>

                        <!-- XPath Helper -->
                        <TitledPane fx:id="xpathHelperPane" text="XPath Tester" expanded="false" collapsible="true"
                                    VBox.vgrow="ALWAYS">
                            <VBox spacing="8" style="-fx-padding: 5;">
                                <Label text="Test XPath Expression:"
                                       style="-fx-font-weight: bold; -fx-font-size: 11px;"/>
                                <TextField promptText="Enter an XPath expression..."
                                           style="-fx-font-size: 11px;"/>
                                <Button text="Test" style="-fx-font-size: 10px;">
                                    <graphic>
                                        <FontIcon iconLiteral="bi-play" iconSize="10"/>
                                    </graphic>
                                </Button>

                                <Label text="Result:" style="-fx-font-weight: bold; -fx-font-size: 11px;"/>
                                <TextArea prefRowCount="3" editable="false" style="-fx-font-size: 10px;"
                                          promptText="XPath result will be displayed here..."/>

                                <Separator/>

                                <Label text="XPath Functions:" style="-fx-font-weight: bold; -fx-font-size: 11px;"/>
                                <ListView prefHeight="80" style="-fx-font-size: 10px;">
                                    <placeholder>
                                        <VBox alignment="CENTER" spacing="5">
                                            <Label text="count() - Count elements" style="-fx-font-size: 10px;"/>
                                            <Label text="string-length() - Text length" style="-fx-font-size: 10px;"/>
                                            <Label text="contains() - Text contains" style="-fx-font-size: 10px;"/>
                                            <Label text="starts-with() - Text starts with"
                                                   style="-fx-font-size: 10px;"/>
                                            <Label text="normalize-space() - Normalize whitespace"
                                                   style="-fx-font-size: 10px;"/>
                                        </VBox>
                                    </placeholder>
                                </ListView>
                            </VBox>
                        </TitledPane>

                    </VBox>

                </SplitPane>
            </VBox>
        </Tab>

        <!-- Visual Builder Tab -->
        <Tab fx:id="visualBuilderTab" text="Visual Builder" closable="false" styleClass="primary-tab">
            <graphic>
                <FontIcon iconLiteral="bi-diagram-3" iconColor="dodgerblue" iconSize="16"/>
            </graphic>

            <VBox fx:id="visualBuilderContainer" spacing="0" SplitPane.resizableWithParent="true">
                <org.fxt.freexmltoolkit.controls.SchematronVisualBuilder fx:id="visualBuilder"
                                                                         VBox.vgrow="ALWAYS"/>
            </VBox>
        </Tab>

        <!-- Test Tab -->
        <Tab fx:id="testTab" text="Test" closable="false" styleClass="output-tab">
            <graphic>
                <FontIcon iconLiteral="bi-play-circle" iconColor="#ff6b6b" iconSize="16"/>
            </graphic>
            <VBox spacing="15" style="-fx-padding: 20;">

                    <!-- Header -->
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <FontIcon iconLiteral="bi-play-circle" iconColor="#ff6b6b" iconSize="32"/>
                        <VBox spacing="5">
                            <Label text="Schematron Testing" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                            <Label text="Test your Schematron rules with XML documents"
                                   style="-fx-text-fill: #6c757d;"/>
                        </VBox>
                    </HBox>

                    <Separator/>

                <!-- Testing Process -->
                <HBox spacing="15">

                    <!-- Step 1: Load Schema -->
                    <VBox spacing="8" style="-fx-border-color: #e9ecef; -fx-border-radius: 5; -fx-padding: 10;"
                          HBox.hgrow="ALWAYS">
                        <Label text="1. Schema Selection" style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
                        <Label text="Choose a Schematron schema for validation"
                               style="-fx-text-fill: #6c757d; -fx-font-size: 11px;" wrapText="true"/>
                        <HBox spacing="10">
                            <Button fx:id="loadSchemaFromFileButton" text="Load Schema from File"
                                    onAction="#loadSchemaFromFile">
                                <graphic>
                                    <FontIcon iconLiteral="bi-folder2-open" iconSize="14"/>
                                </graphic>
                            </Button>
                            <Button fx:id="useCurrentSchemaButton" text="Use Current Schema"
                                    onAction="#useCurrentSchema">
                                <graphic>
                                    <FontIcon iconLiteral="bi-code-slash" iconSize="14"/>
                                </graphic>
                            </Button>
                        </HBox>
                        <!-- Display loaded schema file -->
                        <HBox alignment="CENTER_LEFT" spacing="5">
                            <FontIcon iconLiteral="bi-file-earmark-check" iconColor="#28a745" iconSize="14"/>
                            <Label text="Loaded Schema:" style="-fx-font-weight: bold; -fx-font-size: 11px;"/>
                            <Label fx:id="loadedSchemaLabel" text="None" 
                                   style="-fx-text-fill: #495057; -fx-font-size: 11px; -fx-font-style: italic;"/>
                        </HBox>
                    </VBox>

                    <!-- Step 2: Add Test Files -->
                    <VBox spacing="8" style="-fx-border-color: #e9ecef; -fx-border-radius: 5; -fx-padding: 10;"
                          HBox.hgrow="ALWAYS">
                        <Label text="2. Test Files" style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
                        <Label text="Add XML files to validate against the schema"
                               style="-fx-text-fill: #6c757d; -fx-font-size: 11px;" wrapText="true"/>
                        <HBox spacing="10">
                            <Button fx:id="addXmlFileButton" text="Add XML File" onAction="#addXmlFile">
                                <graphic>
                                    <FontIcon iconLiteral="bi-file-earmark-plus" iconSize="14"/>
                                </graphic>
                            </Button>
                            <Button fx:id="addFolderButton" text="Add Folder" onAction="#addFolder">
                                <graphic>
                                    <FontIcon iconLiteral="bi-folder-plus" iconSize="14"/>
                                </graphic>
                            </Button>
                            <Button fx:id="loadSampleXmlsButton" text="Load Samples" onAction="#loadSampleXmls">
                                <graphic>
                                    <FontIcon iconLiteral="bi-lightbulb" iconColor="#ffc107" iconSize="14"/>
                                </graphic>
                            </Button>
                        </HBox>
                    </VBox>

                </HBox>

                    <!-- Test Files Section -->
                    <VBox spacing="10">
                        <Label text="Test Files:" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>

                        <TableView fx:id="testFilesTable" prefHeight="200" style="-fx-font-size: 12px;">
                            <placeholder>
                                <VBox alignment="CENTER" spacing="10">
                                    <FontIcon iconLiteral="bi-inbox" iconColor="#ced4da" iconSize="32"/>
                                    <Label text="No test files added" style="-fx-text-fill: #6c757d;"/>
                                    <Button fx:id="addFirstXmlFileButton" text="Add First XML File"
                                            onAction="#addXmlFile">
                                        <graphic>
                                            <FontIcon iconLiteral="bi-plus-circle" iconColor="#28a745" iconSize="14"/>
                                        </graphic>
                                    </Button>
                                </VBox>
                            </placeholder>
                            <columns>
                                <TableColumn text="Filename" prefWidth="200"/>
                                <TableColumn text="Status" prefWidth="100"/>
                                <TableColumn text="Rule Violations" prefWidth="100"/>
                                <TableColumn text="Warnings" prefWidth="100"/>
                                <TableColumn text="Actions" prefWidth="150"/>
                            </columns>
                        </TableView>

                        <HBox spacing="10">
                            <Button fx:id="addFileButton" text="Add File" onAction="#addXmlFile">
                                <graphic>
                                    <FontIcon iconLiteral="bi-plus-circle" iconSize="14"/>
                                </graphic>
                            </Button>
                            <Button fx:id="removeSelectedButton" text="Remove Selected" onAction="#removeSelected">
                                <graphic>
                                    <FontIcon iconLiteral="bi-dash-circle" iconColor="#dc3545" iconSize="14"/>
                                </graphic>
                            </Button>
                            <Button fx:id="removeAllButton" text="Remove All" onAction="#removeAll">
                                <graphic>
                                    <FontIcon iconLiteral="bi-trash" iconColor="#dc3545" iconSize="14"/>
                                </graphic>
                            </Button>

                            <Separator orientation="VERTICAL"/>

                            <!-- Test Execution Buttons -->
                            <Button fx:id="runAllTestsButton" text="Run All Tests (F5)" style="-fx-font-weight: bold;"
                                    onAction="#runAllTests">
                                <graphic>
                                    <FontIcon iconLiteral="bi-play-fill" iconColor="#28a745" iconSize="14"/>
                                </graphic>
                            </Button>
                            <Button fx:id="testSingleFileButton" text="Test Selected" onAction="#testSingleFile">
                                <graphic>
                                    <FontIcon iconLiteral="bi-play" iconSize="14"/>
                                </graphic>
                                <tooltip>
                                    <Tooltip text="Test Selected File (Ctrl+T)"/>
                                </tooltip>
                            </Button>
                        </HBox>
                    </VBox>

                    <!-- Test Results Section -->
                    <VBox spacing="10">
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label text="Test Results:" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                            <Button fx:id="exportResultsButton" text="Export Results" onAction="#exportResults">
                                <graphic>
                                    <FontIcon iconLiteral="bi-download" iconSize="14"/>
                                </graphic>
                                <tooltip>
                                    <Tooltip text="Export Results (Ctrl+E)"/>
                                </tooltip>
                            </Button>
                        </HBox>

                        <TabPane fx:id="resultsTabPane" prefHeight="300">
                            <Tab fx:id="overviewResultsTab" text="Overview" closable="false">
                                <ScrollPane fitToWidth="true" fitToHeight="true">
                                    <VBox fx:id="overviewContent" spacing="10" style="-fx-padding: 10;">
                                        <!-- Summary will be displayed here -->
                                        <VBox fx:id="overviewPlaceholder" alignment="CENTER" spacing="15">
                                            <FontIcon iconLiteral="bi-graph-up" iconColor="#6c757d" iconSize="48"/>
                                            <Label text="Run tests to see an overview of results"
                                                   style="-fx-text-fill: #6c757d; -fx-font-size: 14px;"/>
                                        </VBox>
                                    </VBox>
                                </ScrollPane>
                            </Tab>

                            <Tab fx:id="detailsResultsTab" text="Details" closable="false">
                                <ScrollPane fitToWidth="true" fitToHeight="true">
                                    <VBox fx:id="detailsContent" spacing="10" style="-fx-padding: 10;">
                                        <!-- Detailed results will be displayed here -->
                                        <VBox fx:id="detailsPlaceholder" alignment="CENTER" spacing="15">
                                            <FontIcon iconLiteral="bi-list-ul" iconColor="#6c757d" iconSize="48"/>
                                            <Label text="Detailed validation results will be displayed here"
                                                   style="-fx-text-fill: #6c757d; -fx-font-size: 14px;"/>
                                        </VBox>
                                    </VBox>
                                </ScrollPane>
                            </Tab>

                            <Tab fx:id="errorsResultsTab" text="Errors" closable="false">
                                <ScrollPane fitToWidth="true" fitToHeight="true">
                                    <VBox fx:id="errorsContent" spacing="10" style="-fx-padding: 10;">
                                        <!-- Errors will be displayed here -->
                                        <VBox fx:id="errorsPlaceholder" alignment="CENTER" spacing="15">
                                            <FontIcon iconLiteral="bi-exclamation-triangle" iconColor="#6c757d"
                                                      iconSize="48"/>
                                            <Label text="Validation errors and rule violations will be listed here"
                                                   style="-fx-text-fill: #6c757d; -fx-font-size: 14px;"/>
                                        </VBox>
                                    </VBox>
                                </ScrollPane>
                            </Tab>
                        </TabPane>
                    </VBox>

                    <!-- Testing Tips -->
                <TitledPane text="Testing Tips" expanded="true" collapsible="true" animated="true">
                    <graphic>
                        <FontIcon iconLiteral="bi-lightbulb" iconColor="#0c5460" iconSize="16"/>
                    </graphic>
                    <VBox spacing="10" style="-fx-background-color: #d1ecf1; -fx-padding: 15;">
                        <VBox spacing="5">
                            <Label text="• Test both valid and invalid XML documents"
                                   style="-fx-text-fill: #0c5460; -fx-font-size: 12px;"/>
                            <Label text="• Create test cases for every edge case of your business rules"
                                   style="-fx-text-fill: #0c5460; -fx-font-size: 12px;"/>
                            <Label text="• Use meaningful filenames for your test XMLs"
                                   style="-fx-text-fill: #0c5460; -fx-font-size: 12px;"/>
                            <Label text="• Export test results for documentation"
                                   style="-fx-text-fill: #0c5460; -fx-font-size: 12px;"/>
                        </VBox>
                    </VBox>
                </TitledPane>
            </VBox>
        </Tab>

        <!-- Documentation Tab -->
        <Tab fx:id="documentationTab" text="Documentation" closable="false" styleClass="utility-tab">
            <graphic>
                <FontIcon iconLiteral="bi-book" iconColor="#16a34a" iconSize="16"/>
            </graphic>
            <VBox fx:id="documentationContainer" spacing="0" SplitPane.resizableWithParent="true">
                <org.fxt.freexmltoolkit.controls.SchematronDocumentationGenerator fx:id="docGenerator"
                                                                                  VBox.vgrow="ALWAYS"/>
            </VBox>
        </Tab>
        </TabPane>

        <!-- Favorites Panel (unified component) -->
        <fx:include fx:id="favoritesPanel" source="controls/FavoritesPanel.fxml"/>
    </SplitPane>
</VBox>
